name: Deploy Website on Any Event or Sync Trigger

on:
  workflow_run:
    workflows: ["Sync Trigger"]
    types:
      - completed


jobs:
  deploy:
    name: Deploy via Self-Hosted Runner
    runs-on: self-hosted  # Runs on your GCP VM

    steps:
      - name: Checkout repository
        uses: actions/checkout@v3

      - name: Delete all previous files from Nginx root
        run: |
          sudo rm -rf /var/www/html/*

      - name: Copy updated files to Nginx root
        run: |
          sudo cp -r . /var/www/html/

      - name: (Optional) Restart Nginx
        run: |
          sudo systemctl restart nginx
